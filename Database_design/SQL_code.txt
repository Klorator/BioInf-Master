-- create tables

CREATE TABLE DEPARTMENT
(
    Dep_Name VARCHAR(25) NOT NULL,
    Dep_Description VARCHAR(10000),
    Dep_Desc_Short VARCHAR(500),
    Parent_Dep VARCHAR(25),
    PRIMARY KEY(Dep_Name),
    FOREIGN KEY(Parent_Dep) REFERENCES DEPARTMENT(Dep_Name)
);

CREATE TABLE PRODUCT
(
    Prod_ID INT NOT NULL,
    Prod_Name VARCHAR(100) NOT NULL,
    Prod_Description VARCHAR(10000),
    Prod_Desc_Short VARCHAR(200),
    Prod_Price DECIMAL(10, 2) NOT NULL,
    Tax_Percent INT NOT NULL,
    Discount_Percent INT NOT NULL,
    Stock INT NOT NULL,
    Featured BOOLEAN DEFAULT FALSE,
    Dep_Name VARCHAR(25),
    PRIMARY KEY(Prod_ID),
    FOREIGN KEY(Dep_Name) REFERENCES DEPARTMENT(Dep_Name)
);

CREATE TABLE KEYWORDS
(
    Prod_ID INT NOT NULL,
    Keyword VARCHAR(100) NOT NULL,
    PRIMARY KEY (Prod_ID, Keyword),
    FOREIGN KEY (Prod_ID) REFERENCES PRODUCT(Prod_ID) ON DELETE CASCADE
);

CREATE TABLE CUSTOMER
(
    Cust_ID CHAR(12) NOT NULL, -- Personnummer
    First_Name VARCHAR(100),
    Last_Name VARCHAR(100),
    Email VARCHAR(255) NOT NULL UNIQUE,
    Password VARCHAR(255) NOT NULL,
    Phone_nr VARCHAR(50),
    Newsletter BOOLEAN DEFAULT FALSE,
    Address VARCHAR(200),
    PRIMARY KEY(Cust_ID)
);

CREATE TABLE REVIEW (
    Prod_ID INT NOT NULL,
    Cust_ID CHAR(12) NOT NULL,
    Rating INT NOT NULL CHECK (Rating BETWEEN 1 AND 5),
    Rev_Text VARCHAR(500),
    Rev_Date DATE,
    PRIMARY KEY(Prod_ID, Cust_ID),
    FOREIGN KEY(Prod_ID) REFERENCES PRODUCT(Prod_ID) ON DELETE CASCADE,
    FOREIGN KEY(Cust_ID) REFERENCES CUSTOMER(Cust_ID) ON DELETE CASCADE
);

CREATE TABLE ORDERS
(
    Order_ID INT NOT NULL,
    Cust_ID CHAR(12) NOT NULL,
    Date_Created DATE,
    Date_Changed DATE,
    Status VARCHAR(30),  -- ENUM('new','open','dispatched') DEFAULT 'new',
    Payment_Ref CHAR(64),
    Tracking_nr VARCHAR(255),
    PRIMARY KEY(Order_ID),
    FOREIGN KEY(Cust_ID) REFERENCES CUSTOMER(Cust_ID)
);

CREATE TABLE PROD_ORDERED
(
    Prod_ID INT NOT NULL,
    Order_ID INT NOT NULL,
    Prod_Quantity INT NOT NULL,
    Price_Purchase DECIMAL(10,2) NOT NULL,
    PRIMARY KEY (Order_ID, Prod_ID),
    FOREIGN KEY(Prod_ID) REFERENCES PRODUCT(Prod_ID),
    FOREIGN KEY(Order_ID) REFERENCES ORDERS(Order_ID)
);

-- populate tables

INSERT INTO DEPARTMENT
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep)
VALUES
    ('Home', 'All departments', 'Homepage', NULL);
INSERT INTO DEPARTMENT
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Electronics', 'All electronic devices and gadgets', 'Electronics', Home);
INSERT INTO DEPARTMENT
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Mobile Phones', 'Smartphones and mobile accessories', 'Mobiles', 'Electronics');
INSERT INTO DEPARTMENT
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Laptops', 'All types of laptops and accessories', 'Laptops', 'Electronics');
INSERT INTO DEPARTMENT
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Gaming computers', 'All types of high-end PC hardware', 'Gaming stuff', 'Electronics');
INSERT INTO DEPARTMENT
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Home Appliances', 'Appliances for home use', 'Home Appliances', Home);
INSERT INTO DEPARTMENT
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Heating', 'Appliances for heating your home', 'Radiators and stuff', 'Home Appliances');
INSERT INTO DEPARTMENT
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Cleaning', 'Appliances for keeping your home clean', 'Cleaning supplies', 'Home Appliances');
INSERT INTO DEPARTMENT
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Cooling', 'Appliances for staying cool in summer', 'AC and stuff', 'Home Appliances');
INSERT INTO DEPARTMENT 
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Groceries', 'Food and all other food related stuff', 'Groceries', Home);
INSERT INTO DEPARTMENT 
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Crackers and Waffers', 'Munching Items', 'Snacks', 'Groceries');
INSERT INTO DEPARTMENT 
    (Dep_Name, Dep_Description, Dep_Desc_Short, Parent_Dep) 
VALUES
    ('Hot and Cold Drinks', 'Drinking Stuff', 'Bevarages', 'Groceries');


INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (1, 'iPhone 15', 'Apple iPhone 15, 128GB, Silver', 'iPhone 15 128GB', 999.99, 18, 5, 50, TRUE, 'Mobile Phones');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (2, 'Samsung Galaxy S23', 'Samsung flagship phone, 256GB', 'Galaxy S23', 899.99, 18, 10, 30, TRUE, 'Mobile Phones');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (3, 'Dell XPS 13', 'Dell XPS 13 Laptop, Intel i7, 16GB RAM', 'XPS 13 Laptop', 1199.99, 18, 8, 20, FALSE, 'Laptops');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (4, 'Dyson V15 Vacuum', 'Dyson cordless vacuum cleaner', 'Dyson Vacuum', 599.99, 18, 15, 15, FALSE, 'Cleaning');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (7, 'Dyson Ultra AC', 'Dyson high capacity AC for large spaces', 'Dyson AC', 599.99, 18, 15, 15, FALSE, 'Cooling');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (11, 'ASUS Zenbook 14', 'ASUS Zenbook 14 Laptop, Intel core ultra 7, 32GB RAM', 'ASUS Zenbook 14 Laptop', 11990.99, 18, 15, 20, TRUE, 'Laptops');
INSERT INTO PRODUCT
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name)
VALUES
    (6, 'Sony WH-1000XM5', 'Sony WH-1000XM5 Wireless Noise-Cancelling Headphones, 30h battery life', 'Sony WH-1000XM5 Headphones', 399.99, 20, 12, 100, FALSE, 'Gaming computers');
INSERT INTO PRODUCT
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name)
VALUES
    (8, 'LG UltraGear 34"', 'LG UltraGear 34-inch Curved Gaming Monitor, 165Hz, QHD', 'LG UltraGear 34"', 899.00, 22, 10, 40, FALSE, 'Gaming computers');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (10, 'Oreo Biscuits', 'Delicious chocolate sandwich cookies', 'Oreo', 3.99, 5, 10, 100, false, 'Groceries');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (12, 'Lays Potato Chips', 'Crispy salted potato chips', 'Lays Chips', 2.49, 5, 5, 150, false, 'Crackers and Waffers');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (15, 'Coca Cola 500ml', 'Refreshing carbonated soft drink', 'Coca Cola', 1.49, 5, 0, 200, true, 'Hot and Cold Drinks');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (19, 'Pepsi 500ml', 'Popular cola beverage', 'Pepsi', 1.39, 5, 0, 180, true, 'Hot and Cold Drinks');
INSERT INTO PRODUCT 
    (Prod_ID, Prod_Name, Prod_Description, Prod_Desc_Short, Prod_Price, Tax_Percent, Discount_Percent, Stock, Featured, Dep_Name) 
VALUES
    (20, 'Sprite 500ml', 'Lemon-lime soft drink', 'Sprite', 1.29, 5, 0, 160, false, 'Hot and Cold Drinks');


INSERT INTO KEYWORDS (Prod_ID, Keyword) VALUES
(1, 'Smartphone');
INSERT INTO KEYWORDS (Prod_ID, Keyword) VALUES
(1, 'Apple');
INSERT INTO KEYWORDS (Prod_ID, Keyword) VALUES
(2, 'Smartphone');
INSERT INTO KEYWORDS (Prod_ID, Keyword) VALUES
(2, 'Samsung');
INSERT INTO KEYWORDS (Prod_ID, Keyword) VALUES
(3, 'Laptop');
INSERT INTO KEYWORDS (Prod_ID, Keyword) VALUES
(3, 'Dell');
INSERT INTO KEYWORDS (Prod_ID, Keyword) VALUES
(4, 'Vacuum');
INSERT INTO KEYWORDS (Prod_ID, Keyword) VALUES
(4, 'Home Appliance');


INSERT INTO CUSTOMER 
    (Cust_ID, First_Name, Last_Name, Email, Password, Phone_nr, Newsletter, Address) 
VALUES
    ('100000000001', 'Alice', 'Smith', 'alice@example.com', 'password123', '5551234567', TRUE, '12 Elm Street');
INSERT INTO CUSTOMER 
    (Cust_ID, First_Name, Last_Name, Email, Password, Phone_nr, Newsletter, Address) 
VALUES
    ('100000000002', 'Bob', 'Johnson', 'bob@example.com', 'pass456', '5559876543', FALSE, '34 Oak Avenue');

INSERT INTO CUSTOMER
    (Cust_ID, First_Name, Last_Name, Email, Password, Phone_nr, Newsletter, Address)
VALUES
    ('100000000011', 'Charlie', 'Williams', 'charlie82@example.com', 'charliePass', '5551112233', TRUE, '56 Maple Road');
INSERT INTO CUSTOMER
    (Cust_ID, First_Name, Last_Name, Email, Password, Phone_nr, Newsletter, Address)
VALUES
    ('100000000012', 'Diana', 'Brown', 'diana@example.com', 'dianaSecure', '5552223344', FALSE, '78 Pine Lane');
INSERT INTO CUSTOMER
    (Cust_ID, First_Name, Last_Name, Email, Password, Phone_nr, Newsletter, Address)
VALUES
    ('100000000005', 'Ethan', 'Davis', 'ethan@example.com', 'ethanKey', '5553334455', TRUE, '90 Cedar Street');
INSERT INTO CUSTOMER
    (Cust_ID, First_Name, Last_Name, Email, Password, Phone_nr, Newsletter, Address)
VALUES
    ('100000000006', 'Fiona', 'Miller', 'fiona@example.com', 'fionaLock', '5554445566', TRUE, '23 Birch Avenue');
INSERT INTO CUSTOMER
    (Cust_ID, First_Name, Last_Name, Email, Password, Phone_nr, Newsletter, Address)
VALUES
    ('100000000007', 'George', 'Wilson', 'george@example.com', 'georgeSafe', '5555556677', FALSE, '45 Willow Drive');



INSERT INTO ORDERS 
    (Order_ID, Cust_ID, Date_Created, Date_Changed, Status, Payment_Ref, Tracking_nr) 
VALUES
    (10001, '100000000001', DATE'2025-12-01', DATE'2025-12-02', 'new', 'PAY0012454851515154555454545454XXXXXXXXXXXXXXXXXXXXXXXXXXXX', 'TRACK123');
INSERT INTO ORDERS 
    (Order_ID, Cust_ID, Date_Created, Date_Changed, Status, Payment_Ref, Tracking_nr) 
VALUES
    (10002, '100000000002', DATE'2025-12-02', DATE'2025-12-03', 'open', 'PAY0022454851515154555454545454XXXXXXXXXXXXXXXXXXXXXXXXXXXX', 'TRACK456');
INSERT INTO Orders 
    (Order_ID, Cust_ID, Date_Created, Date_Changed, Status, Payment_Ref, Tracking_nr) 
VALUES
    (10001, '100000000001', DATE '2025-12-01', DATE '2025-12-02', 'new', 'PAY0012454851515154555454545454XXXXXXXXXXXXXXXXXXXXXXXXXXXX', 'TRACK123');
INSERT INTO Orders 
    (Order_ID, Cust_ID, Date_Created, Date_Changed, Status, Payment_Ref, Tracking_nr) 
VALUES
    (10002, '100000000002', DATE '2025-12-02', DATE '2025-12-03', 'open', 'PAY0022454851515154555454545454XXXXXXXXXXXXXXXXXXXXXXXXXXXX', 'TRACK456');
INSERT INTO Orders 
    (Order_ID, Cust_ID, Date_Created, Date_Changed, Status, Payment_Ref, Tracking_nr) 
VALUES
    (10003, '100000000003', DATE '2025-12-03', DATE '2025-12-04', 'dispatched', 'PAY0032454851515154555454545454XXXXXXXXXXXXXXXXXXXXXXXXXXXX', 'TRACK789');
INSERT INTO Orders 
    (Order_ID, Cust_ID, Date_Created, Date_Changed, Status, Payment_Ref, Tracking_nr) 
VALUES
    (10004, '100000000004', DATE '2025-12-04', DATE '2025-12-05', 'new', 'PAY0042454851515154555454545454XXXXXXXXXXXXXXXXXXXXXXXXXXXX', 'TRACK101');
INSERT INTO Orders 
    (Order_ID, Cust_ID, Date_Created, Date_Changed, Status, Payment_Ref, Tracking_nr) 
VALUES
    (10005, '100000000001', DATE '2025-12-05', DATE '2025-12-06', 'open', 'PAY0052454851515154555454545454XXXXXXXXXXXXXXXXXXXXXXXXXXXX', 'TRACK102');
INSERT INTO Orders 
    (Order_ID, Cust_ID, Date_Created, Date_Changed, Status, Payment_Ref, Tracking_nr) 
VALUES
    10006, '100000000002', DATE '2025-12-06', DATE '2025-12-07', 'dispatched', 'PAY0062454851515154555454545454XXXXXXXXXXXXXXXXXXXXXXXXXXXX', 'TRACK103');


INSERT INTO PROD_ORDERED 
    (Prod_ID, Order_ID, Prod_Quantity, Price_Purchase) 
VALUES
    (1, 10001, 1, 999.99);
INSERT INTO PROD_ORDERED 
    (Prod_ID, Order_ID, Prod_Quantity, Price_Purchase) 
VALUES
    (3, 10002, 1, 1199.99);
INSERT INTO PROD_ORDERED 
    (Prod_ID, Order_ID, Prod_Quantity, Price_Purchase) 
VALUES
    (2, 10001, 2, 899.99);
INSERT INTO PROD_ORDERED 
    (Prod_ID, Order_ID, Prod_Quantity, Price_Purchase) 
VALUES
    (12, 10004, 4, 1.49);
INSERT INTO PROD_ORDERED 
    (Prod_ID, Order_ID, Prod_Quantity, Price_Purchase) 
VALUES
    (10, 10001, 1, 3.99);
INSERT INTO PROD_ORDERED 
    (Prod_ID, Order_ID, Prod_Quantity, Price_Purchase) 
VALUES
    (15, 10003, 6, 1.49);
INSERT INTO PROD_ORDERED 
    (Prod_ID, Order_ID, Prod_Quantity, Price_Purchase) 
VALUES
    (11, 10005, 1, 3.99);
INSERT INTO PROD_ORDERED 
    (Prod_ID, Order_ID, Prod_Quantity, Price_Purchase) 
VALUES
    (3, 10006, 6, 1.49);


INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date) 
VALUES
    (1, '100000000001', 5, 'Amazing iPhone, love it!', DATE'2025-12-02');
INSERT INTO Review 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date) 
VALUES
    (2, '100000000002', 4, 'Great phone but battery could be better', DATE'2025-12-03');
INSERT INTO Review 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date) 
VALUES
    (3, '100000000001', 5, 'Excellent laptop for work and travel', DATE'2025-12-02');
INSERT INTO REVIEW
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES
    (6, '100000000007', 5, 'Noise cancellation is unbeatable, perfect for travel.', DATE'2025-12-08');
INSERT INTO REVIEW
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES
    (6, '100000000002', 4, 'Great sound quality but a bit pricey.', DATE'2025-12-09');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (1, '100000000002', 4, 'Great phone but battery drains quicker than expected.', DATE'2025-12-03');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (1, '100000000011', 5, 'Super smooth performance, Face ID works flawlessly.', DATE'2025-12-28');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (1, '100000000012', 3, 'Good phone but too pricey for the features.', DATE'2025-12-29');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (2, '100000000001', 5, 'Fantastic display and smooth performance!', DATE'2025-12-04');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (2, '100000000005', 5, 'Battery life is excellent, lasts all day easily.', DATE'2025-12-30');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (2, '100000000006', 4, 'Camera is sharp but phone feels heavy.', DATE'2025-12-31');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (3, '100000000002', 4, 'Solid performance but fan noise is noticeable.', DATE'2025-12-07');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (3, '100000000007', 5, 'Compact design, perfect for business travel.', DATE'2026-01-01');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (3, '100000000011', 4, 'Fast performance but limited ports.', DATE'2026-01-02');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (4, '100000000001', 5, 'Cleans carpets and hardwood floors effortlessly!', DATE'2025-12-08');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (4, '100000000002', 3, 'Good suction but battery life is shorter than expected.', DATE'2025-12-09');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (4, '100000000012', 5, 'Lightweight and powerful, makes cleaning easy.', DATE'2026-01-03');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (4, '100000000005', 4, 'Great suction but charging takes too long.', DATE'2026-01-04');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (7, '100000000001', 5, 'Keeps the whole living room cool even in summer heat.', DATE'2025-12-10');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (7, '100000000002', 4, 'Strong cooling but a bit noisy at night.', DATE'2025-12-11');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (7, '100000000006', 5, 'Cools the room quickly, very effective.', DATE'2026-01-05');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (7, '100000000007', 3, 'Works fine but consumes a lot of electricity.', DATE'2026-01-06');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (11, '100000000001', 5, 'Super fast laptop, handles multitasking with ease.', DATE'2025-12-12');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (11, '100000000002', 4, 'Excellent build quality but quite expensive.', DATE'2025-12-13');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (11, '100000000011', 5, 'Handles heavy software easily, great productivity laptop.', DATE'2026-01-07');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (11, '100000000012', 4, 'Excellent keyboard but screen brightness could be better.', DATE'2026-01-08');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (6, '100000000001', 5, 'Noise cancellation is incredible, perfect for flights.', DATE'2025-12-14');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (6, '100000000005', 5, 'Crystal clear audio, perfect for music lovers.', DATE'2026-01-09');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (6, '100000000006', 3, 'Good headphones but uncomfortable after long use.', DATE'2026-01-10');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (8, '100000000001', 5, 'Immersive curved screen, gaming feels amazing!', DATE'2025-12-16');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (8, '100000000002', 4, 'Beautiful visuals but takes up a lot of desk space.', DATE'2025-12-17');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (8, '100000000007', 5, 'Amazing refresh rate, perfect for competitive gaming.', DATE'2026-01-11');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (8, '100000000011', 4, 'Great visuals but expensive.', DATE'2026-01-12');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (10, '100000000001', 5, 'Classic taste, always delicious with milk.', DATE'2025-12-18');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (10, '100000000002', 4, 'Great cookies but a bit too sweet.', DATE'2025-12-19');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (10, '100000000012', 5, 'Classic cookies, my kids love them.', DATE'2026-01-13');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
VALUES 
    (10, '100000000005', 4, 'Tasty but packaging could be better.', DATE'2026-01-14');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
    VALUES 
    (12, '100000000001', 5, 'Crispy and perfectly salted, my favorite snack.', DATE'2025-12-20');
INSERT INTO REVIEW 
    (Prod_ID, Cust_ID, Rating, Rev_Text, Rev_Date)
    VALUES 
    (12, '100000000002', 3, 'Good chips but too oily for my taste.', DATE'2025-12-21');


-- Queries

SELECT Dep_Description
FROM Department
WHERE Parent_Dep IS NULL;


SELECT
    Dep_Name AS Title,
    Dep_Desc_Short AS Short_Description
FROM Department
WHERE Parent_Dep IS NULL
ORDER BY Dep_Name;


SELECT
    Prod_ID,
    Prod_Name AS Title,
    Prod_Desc_Short AS Short_Description,
    ROUND(Prod_Price * (1 + Tax_Percent / 100) * (1 - Discount_Percent / 100), 2)
        AS Current_Retail_Price
FROM Product
WHERE Featured = true
ORDER BY Prod_Name;


SELECT
    p.Prod_ID,
    p.Prod_Name AS Title,
    p.Prod_Desc_Short AS Short_Description,
    ROUND(p.Prod_Price * (1 + p.Tax_Percent/100) * (1 - p.Discount_Percent/100), 2)
        AS Current_Retail_Price,
    ROUND(AVG(r.Rating), 2) AS Avg_Rating
FROM Product p
LEFT JOIN Review r ON r.Prod_ID = p.Prod_ID
WHERE p.Dep_Name = ?
GROUP BY p.Prod_ID, p.Prod_Name, p.Prod_Desc_Short,
         p.Prod_Price, p.Tax_Percent, p.Discount_Percent
ORDER BY p.Prod_Name;


SELECT DISTINCT
    p2.Prod_ID,
    p2.Prod_Name,
    p2.Prod_Desc_Short,
    ROUND(p2.Prod_Price * (1 + p2.Tax_Percent/100) * (1 - p2.Discount_Percent/100), 2)
        AS Retail_Price_With_Tax
FROM Keywords k1
JOIN Keywords k2 ON k1.Keyword = k2.Keyword
JOIN Product p2 ON p2.Prod_ID = k2.Prod_ID
WHERE k1.Prod_ID = ?
  AND k2.Prod_ID <> k1.Prod_ID
ORDER BY p2.Prod_Name;


SELECT
    Prod_ID,
    Prod_Name,
    Prod_Desc_Short,
    Discount_Percent,
    ROUND(Prod_Price * (1 + Tax_Percent/100) * (1 - Discount_Percent/100), 2)
        AS Current_Retail_Price
FROM Product
WHERE Discount_Percent > 0
ORDER BY Discount_Percent DESC, Prod_Name;

-- optional
SELECT
    p.Prod_ID,
    p.Prod_Name,
    SUM(po.Prod_Quantity) AS Total_Sold
FROM Prod_Ordered po
JOIN Orders o ON po.Order_ID = o.Order_ID
JOIN Product p ON po.Prod_ID = p.Prod_ID
WHERE o.Date_Created >= CURRENT_DATE - INTERVAL '30' DAY
GROUP BY p.Prod_ID, p.Prod_Name
ORDER BY Total_Sold DESC
FETCH FIRST 10 ROWS ONLY;

